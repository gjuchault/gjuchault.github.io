<!DOCTYPE html>
<html class="nojs">
    {% include head.html %}
    <body>
        {% include header.html %}

        {{ content }}

        <script async src="/assets/bower_components/system.js/dist/system.js" onload="loadJS()"></script>
        <script async>
            function loadStyleSheet (src) {
                fetch(src)
                    .then(r => r.text())
                    .then(t => {
                        var style       = document.createElement('style');
                        style.type      = 'text/css';
                        style.innerHTML = t;
                        document.getElementsByTagName('head')[0].appendChild(style);
                    });
            }

            loadStyleSheet('/assets/bower_components/material-design-lite/material.min.css');
            loadStyleSheet('{{ "/css/main.css" | prepend: site.baseurl }}');

            function loadJS() {
                /* global System */
                System.config({
                    baseURL   : '/assets/js',
                    map       : {
                        traceur: '/assets/bower_components/traceur/traceur.js',
                        json   : '/assets/bower_components/plugin-json/json.js'
                    },
                    transpiler: 'traceur',
                    globalEvaluationScope: false
                });

                System.import('main.js');
            }
        </script>
    </body>
</html>
